<link rel="stylesheet" href="styles/controls.css">
<title>Controls</title>
<body>
    <div class="controls">
        <div class="column">
            <button onclick="startTimer()">Start Timer</button>
            <br>
            <button onclick="pauseTimer()">Pause Timer</button>
            <br>
            <button onclick="clearTimer()">Clear Saved Time</button>
            <br>
            <button onclick="skipAnimation()">Skip Animation</button>
        </div>
        <div class="column">
            <input type="number" id="multiplier" placeholder="Multiplier (e.g., 2)" min="1">
            <button onclick="startMultiplier()">Start Multiplier</button>
            <br>
            <button onclick="stopMultiplier()">Stop Multiplier</button>
        </div>
        <div class="column">
            <input class="hhmmss" pattern="^(\d+|((\d+:)?\d{1,2}:)?\d{1,2})$" id="timeAdjustment" placeholder="Time (HH:MM:SS, MM:SS, or seconds)">
            <button onclick="addTime()">Add Time</button>
            <br>
            <button onclick="removeTime()">Remove Time</button>
        </div>
    </div>


    <script>
        let multiplierInterval = null;

        function startTimer() {
            window.electronAPI.startTimer();
        }

        function pauseTimer() {
            window.electronAPI.pauseTimer();
        }

        function clearTimer() {
            window.electronAPI.clearTimer();
        }

        function skipAnimation() {
            window.electronAPI.skipAnimation();
        }

       function startMultiplier() {
            window.electronAPI.startMultiplier(document.getElementById("multiplier").value);
       }

       function stopMultiplier() {
            window.electronAPI.startMultiplier(1);
       }

        function parseHhMmSs(v) {
          const vs = v.split(':')
          let secs = Number(vs.pop())
          const minutes = vs.pop()
          if (minutes) secs += Number(minutes) * 60
          const hours = vs.pop()
          if (hours) secs += Number(hours) * 60 * 60
          return secs
        }

       function addTime() {
            window.electronAPI.addTime(parseHhMmSs(document.getElementById("timeAdjustment").value))
       }

       function removeTime() {
            window.electronAPI.addTime(-parseHhMmSs(document.getElementById("timeAdjustment").value))
       }
    </script>
</body>
</html>
